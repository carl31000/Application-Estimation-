<div id="app" style="max-width:520px;font-family:system-ui,-apple-system,Segoe UI,Roboto;margin:16px">
  <h2 style="margin:0 0 10px">Estimation express – Carrelage / Faïence</h2>

  <div style="margin:6px 0">
    <label><input type="radio" name="type" value="sol" checked> Carrelage sol</label>
    <label style="margin-left:12px"><input type="radio" name="type" value="mur"> Faïence murale</label>
  </div>

  <div style="margin:6px 0">
    <label>Surface (m²) :
      <input type="number" id="surface" value="0" min="0" step="0.1" style="width:100%;padding:8px;margin-top:4px">
    </label>
  </div>

  <div style="margin:6px 0">
    <label>Qualité :</label>
    <select id="quality" style="width:100%;padding:8px;margin-top:4px">
      <option value="bas">Entrée de gamme</option>
      <option value="moyen" selected>Moyenne gamme</option>
      <option value="haut">Haut de gamme</option>
    </select>
  </div>

  <div style="margin:6px 0">
    <label>Remarque (optionnel) :</label>
    <input type="text" id="note" placeholder="Ex : grand format, joints époxy, etc." style="width:100%;padding:8px;margin-top:4px">
  </div>

  <div id="output" style="margin-top:12px;padding:10px;border:1px solid #e5e7eb;border-radius:10px;background:#f9fafb">
    <p style="margin:0">PU estimé : <strong id="pu">0 €</strong></p>
    <p style="margin:6px 0 0">Total estimé (HT) : <strong id="total">0 €</strong></p>
    <p id="noteView" style="margin:6px 0 0;color:#475569;display:none"></p>
  </div>
</div>

<script>
  const refs = {
    surface: document.getElementById('surface'),
    total: document.getElementById('total'),
    typeInputs: document.getElementsByName('type'),
    quality: document.getElementById('quality'),
    pu: document.getElementById('pu'),
    note: document.getElementById('note'),
    noteView: document.getElementById('noteView')
  };

  // Barème simple
  const PRICES = {
    sol: { bas: 50, moyen: 86, haut: 170 },
    mur: { bas: 40, moyen: 79, haut: 170 }
  };

  function euro(n){
    return (Number(n)||0).toLocaleString('fr-FR', { style: 'currency', currency: 'EUR' });
  }

  function calc(){
    const surf = parseFloat(refs.surface.value) || 0;
    const type = [...refs.typeInputs].find(r=>r.checked).value;
    const qual = refs.quality.value;
    const pu = PRICES[type][qual];
    refs.pu.textContent = euro(pu);
    refs.total.textContent = euro(surf * pu);

    // Affichage remarque (sans impact sur le prix)
    const txt = refs.note.value.trim();
    if(txt){
      refs.noteView.style.display = 'block';
      refs.noteView.textContent = "Remarque : " + txt;
    }else{
      refs.noteView.style.display = 'none';
      refs.noteView.textContent = "";
    }
  }

  refs.surface.addEventListener('input', calc);
  refs.quality.addEventListener('change', calc);
  refs.note.addEventListener('input', calc);
  refs.typeInputs.forEach(r => r.addEventListener('change', calc));

  calc();
</script>